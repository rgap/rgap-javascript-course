<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simulated Fetch Example</title>
    <script>
      // Fetching data with a callback

      // This function simulates fetching a response using setTimeout.
      // Instead of directly logging the response inside the function,
      // it uses a callback to pass the data to another function for further processing.

      function fetchData(callback) {
        setTimeout(() => {
          const response = {
            status: 200,
            statusText: "OK",
            url: "https://example.com/api/data",
            headers: {
              "content-type": "application/json",
            },
            body: JSON.stringify({ userId: 1, name: "John Doe" }),
          };

          console.log("Response received:", response); // Logs after 3 seconds

          setTimeout(() => {
            const data = JSON.parse(response.body); // Simulates response.json()
            console.log("Data received:", data); // Logs after 2 more seconds

            // ✅ Pass the data to the callback function
            callback(data);
          }, 2000); // Simulated delay for JSON processing
        }, 3000);
      }

      // Function that will receive the data
      function processData(data) {
        console.log("Final data:", data); // ✅ Now the data can be used outside fetchData()
      }

      // Calling fetchData with processData as the callback
      fetchData(processData);
      
    </script>
  </head>
  <body></body>
</html>
