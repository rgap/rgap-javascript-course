<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Abort XMLHttpRequest Demo</title>
  </head>
  <body>
    <h1>XMLHttpRequest - Abort Demo</h1>
    <button id="startBtn">Start Request</button>
    <button id="abortBtn">Abort Request</button>

    <script>
      /**
       * üìö Theory:
       * The `abort()` method cancels a request if it's no longer needed.
       * This is useful for:
       *  - live searches (abort the previous query)
       *  - large file downloads
       *  - navigation or tab changes
       *
       * When aborted, `xhr.onabort` will fire.
       */

      let xhr = null;

      document.getElementById("startBtn").onclick = () => {
        xhr = new XMLHttpRequest();
        xhr.open("GET", "https://jsonplaceholder.typicode.com/photos"); // Large payload

        xhr.onload = () => {
          console.log("‚úÖ Request completed.");
        };

        xhr.onabort = () => {
          console.log("üö´ Request was aborted.");
        };

        xhr.send();
        console.log("üì° Request started...");
      };

      document.getElementById("abortBtn").onclick = () => {
        if (xhr) {
          xhr.abort(); // ‚ùå Cancel the request
        }
      };
    </script>
  </body>
</html>
