<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>XHR JSON Response Example</title>
  </head>
  <body>
    <h1>XMLHttpRequest - Parse JSON Response</h1>

    <script>
      /**
       * ğŸ“š Background:
       * When an API returns JSON data, we must manually parse it using JSON.parse().
       * Many APIs return arrays â€” like a list of posts, users, etc.
       *
       * This example fetches a list of posts and displays the first few titles.
       */

      const xhr = new XMLHttpRequest();

      xhr.open("GET", "https://jsonplaceholder.typicode.com/posts");

      xhr.onload = function () {
        if (xhr.status === 200) {
          // âœ… Parse the JSON string into a real JS object (here: an array of posts)
          const posts = JSON.parse(xhr.responseText);

          console.log(`âœ… Received ${posts.length} posts`);
          console.log("ğŸ“ First 3 post titles:");

          for (let i = 0; i < 3; i++) {
            console.log(`  â€¢ (${posts[i].id}) ${posts[i].title}`);
          }
        } else {
          console.log("âŒ Failed to load data. Status:", xhr.status);
        }
      };

      xhr.send();
    </script>
  </body>
</html>
