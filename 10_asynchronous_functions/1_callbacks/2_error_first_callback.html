<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script>
      // Error-First Callback Example in JavaScript

      // Error-first callbacks are a convention where the first argument of the callback is an error object (or null if no error), and the subsequent arguments are the results.
      // This pattern allows for consistent error handling and clearer separation of error-handling logic and success logic.

      // Simulate an asynchronous operation like fetching data from an API
      function fetchData(callback) {
        // Simulate a delay for the asynchronous operation (e.g., network request)
        setTimeout(() => {
          const error = false; // Change to true to simulate an error
          const data = { id: 1, name: "John Doe", age: 30 };

          if (error) {
            // If an error occurs, call the callback with an error message and null data
            callback("An error occurred", null);
          } else {
            // If no error occurs, call the callback with null error and the fetched data
            callback(null, data);
          }
        }, 3000); // Simulate a 3-second delay
      }

      // Handle the result of the asynchronous operation
      function handleData(error, data) {
        // Check if an error was passed to the callback
        if (error) {
          // If there is an error, handle it (e.g., log it to the console)
          console.error("Error:", error);
        } else {
          // If there is no error, process the received data
          console.log("Data received:", data);
        }
      }

      // The fetchData function takes handleData as a callback
      // When fetchData completes its asynchronous operation, it calls handleData with either an error or the fetched data
      fetchData(handleData);

      // Explanation:
      // - The 'fetchData' function simulates fetching data with a delay of 3 seconds using setTimeout.
      // - During the simulated fetch, an error can be toggled by setting 'error' to true or false.
      // - If an error occurs, the callback (handleData) is called with an error message and null data.
      // - If no error occurs, the callback is called with null error and the fetched data.
      // - The 'handleData' function checks for the presence of an error and handles it accordingly, or processes the data if no error exists.
    </script>
  </head>
  <body></body>
</html>
